<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Health Tracker - Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <a href="index.html" class="sidebar-brand">
                <span style="font-size: 1.5em;">ðŸ“Š</span> PHT
            </a>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="active">Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="create.html">Nuevo Proyecto</a>
                </li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <div>
                    <h1>Portafolio de Proyectos</h1>
                    <p>Vista consolidada del estado de salud de los proyectos.</p>
                </div>
                <div style="display: flex; gap: 0.75rem;">
                    <button id="toggle-archived" class="btn btn-secondary">
                        ðŸ“‚ Ver HistÃ³rico
                    </button>
                    <a href="create.html" class="btn btn-primary">
                        <span>+</span> Registrar Proyecto
                    </a>
                </div>
            </header>

            <!-- Filters -->
            <div class="card" style="padding: 1rem 1.5rem; margin-bottom: 1.5rem;">
                <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <label for="filter-year"
                            style="font-size: 0.875rem; color: var(--text-muted); white-space: nowrap;">AÃ±o:</label>
                        <select id="filter-year" class="form-control" style="min-width: 100px; padding: 0.5rem;">
                            <option value="">Todos</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <label for="filter-delivery"
                            style="font-size: 0.875rem; color: var(--text-muted); white-space: nowrap;">Delivery:</label>
                        <select id="filter-delivery" class="form-control" style="min-width: 140px; padding: 0.5rem;">
                            <option value="">Todos</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <label for="filter-leader"
                            style="font-size: 0.875rem; color: var(--text-muted); white-space: nowrap;">LÃ­der:</label>
                        <select id="filter-leader" class="form-control" style="min-width: 140px; padding: 0.5rem;">
                            <option value="">Todos</option>
                        </select>
                    </div>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <label for="filter-tech"
                            style="font-size: 0.875rem; color: var(--text-muted); white-space: nowrap;">TÃ©cnico:</label>
                        <select id="filter-tech" class="form-control" style="min-width: 140px; padding: 0.5rem;">
                            <option value="">Todos</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Consolidated Stats -->
            <div class="dashboard-grid" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 2rem;">
                <div class="card" style="text-align: center;">
                    <h3 style="font-size: 1rem; color: var(--text-muted);">Total Proyectos</h3>
                    <div id="stat-total" style="font-size: 2.5rem; font-weight: 700; color: var(--primary-dark);">0
                    </div>
                </div>
                <div class="card" style="text-align: center;">
                    <h3 style="font-size: 1rem; color: var(--text-muted);">Salud Promedio</h3>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <div id="stat-avg" style="font-size: 2.5rem; font-weight: 700; color: var(--primary-dark);">-
                        </div>
                        <div id="stat-avg-indicator" class="traffic-light" style="width: 20px; height: 20px;"></div>
                    </div>
                </div>
                <div class="card" style="text-align: center;">
                    <h3 style="font-size: 1rem; color: var(--text-muted);">En Riesgo / CrÃ­tico</h3>
                    <div id="stat-risk" style="font-size: 2.5rem; font-weight: 700; color: var(--status-critical);">0
                    </div>
                </div>
            </div>

            <!-- Trend Chart -->
            <div class="card" style="margin-bottom: 2rem;">
                <h3 style="margin-bottom: 1rem;">Tendencia de Salud del Portafolio (Ãšltimas 12 Semanas)</h3>
                <div style="height: 300px;">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>

            <!-- Dashboard Table -->
            <div class="card" style="overflow-x: auto; padding: 0;">
                <table class="dashboard-table">
                    <thead>
                        <tr>
                            <th style="width: 25%;">Proyecto</th>
                            <th style="width: 15%;">Cliente</th>
                            <th style="text-align: center;">EN</th>
                            <th style="text-align: center;">EQ</th>
                            <th style="text-align: center;">SH</th>
                            <th style="text-align: center;">VA</th>
                            <th style="text-align: center;">RI</th>
                            <th style="text-align: center;">Salud Total</th>
                            <th style="text-align: right;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="project-table-body">
                        <!-- Rows injected by JS -->
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/app.js"></script>
</body>

</html>